---
title: 安全组
description: 本章节介绍安全组理方法
weight: 3
---

## 查看安全组

* 安全组列表：
  * 点击"**筛选**"按钮，输入过滤条件，查询过滤后的安全组列表
  * 点击"**列过滤**"按钮，过滤需要显示在列表也的信息，默认全部显示
* 查看安全组详情：在列表中选中某个安全组，显示安全组详情信息
  * 基本信息页：显示安全组的基础信息 
  * 入方向规则页：显示所有该安全组下入方向规则信息
  * 入方向规则页：显示所有该安全组下出方向规则信息
  * 安全组操作日志页：显示安全组的操作日志
  
{{% imgproc sg_list Fit "1000x600" %}}
安全组列表页
{{% /imgproc %}}

{{% imgproc sg_ingress Fit "1000x400" %}}
安全组的入方向规则页
{{% /imgproc %}}

{{% imgproc sg_egress Fit "1000x400" %}}
安全组的出方向规则页
{{% /imgproc %}}

{{% imgproc sg_log Fit "1000x400" %}}
安全组的操作日志
{{% /imgproc %}}

## 新建安全组
* 在基础信息页输入:
  * 输入安全组的名称,允许(2～64)个字符，且只允许字母、数字，”-“和”_”
  * (可选)描述

{{% imgproc sg_new_basic Fit "1000x400" %}}
新建安全组
{{% /imgproc %}}

* 在入方向规则页添加:
  * 规则的执行策略(ACCEPT或者REJECT)
  * 协议(tcp、udp、icmp或者全部)
  * 源地址CIDR(默认0.0.0.0/0即全部IP)，支持IPv4和IPv6两种格式
  * 目标端口(可以是一个端口号，或者是一个端口范围，例如1000:2000代表从1000到2000端口)，不填写代表全部端口(1:65535)
  * (可选)描述
  
{{% imgproc sg_new_ingress Fit "1000x400" %}}
安全组入方向规则
{{% /imgproc %}}

{{% alert title="提示" color="primary" %}}
   1. 规则的顺序是重要的，网络数据包会根据规则的顺序进行匹配。
   2. 一个安全组最多128个入方向规则
   3. 安全组的入方向规则已经包含了以下默认的网络策略，不需要用户再手动添加:
      1. 已经建立的连接放行
      2. dhcp服务端的来包放行
      3. 其它全部数据包丢弃（放在所有规则最后）
{{% /alert %}}

* 在出方向规则页添加:
  * 规则的执行策略(ACCEPT或者REJECT)
  * 协议(tcp、udp、icmp)
  * 目标地址CIDR(默认0.0.0.0/0即全部IP)，支持IPv4和IPv6两种格式
  * 目标端口(可以是一个端口号，或者是一个端口范围，例如1000:2000代表从1000到2000端口)，不填写代表全部端口(1:65535)
  * (可选)描述

{{% imgproc sg_new_egress Fit "1000x400" %}}
安全组入方向规则
{{% /imgproc %}}

{{% alert title="提示" color="primary" %}}
   1. 规则的顺序是重要的，网络数据包会根据规则的顺序进行匹配。
   2.  一个安全组最多128个出方向规则
   3. 安全组的出方向规则已经包含了以下默认的网络策略，不需要用户再手动添加:
      1. dhcp客户端的出包放行
      2. dhcp服务端的出包拒绝，即不允许用户自建dhcp服务器，防止dhcp欺骗
      3. 已经建立的连接放行
      4. 非法的数据包丢弃（放在所有规则最后）
{{% /alert %}}


### 更新安全组信息

更新安全组信息的UI操作雷同新建安全组的UI操作。需要说明的是，安全组更新后，会把所有绑定该安全组的弹性网卡一起更新，即启动同步任务更新各节点上的iptables规则信息表。

## 弹性网卡的生命周期管理
* **删除**: 对于处于"可用"状态下的安全组，在安全组列表"操作"列点击"删除"按钮即可删除，删除后无法恢复。注意如果该安全组已经被任何弹性网卡绑定，则无法删除，需要释放所有绑定的网卡后才能执行删除。
