---
title: 虚拟机
description: 本章节介绍虚拟机全生命周期的管理方法
weight: 2
---

## 查看虚拟机

* 查看虚拟机列表：
  * 选择当前的**可用区**和**集群**，查看当前集群下所有的虚拟机
  * 点击**筛选**按钮，输入过滤条件，查询过滤后的虚拟机列表
  * 点击**列过滤**按钮，过滤需要显示在列表也的信息，默认全部显示
* 查看虚拟机详情：在列表中选中某个虚拟机，显示虚拟机详情信息
  * 基本信息页：显示虚拟机的基础信息 
  * 云盘信息页：显示虚拟机挂载的云盘信息列表
  * 网卡信息页：显示虚拟机挂载的弹性网卡信息列表
  * 系统监控页：显示虚拟机整体的CPU、内存使用率
  * I/O监控页：显示虚拟机整体的磁盘I/O、网络I/O情况
  
{{% imgproc vmlist Fit "1000x1000" %}}
虚拟机列表页和虚拟机详情基础信息页
{{% /imgproc %}}

{{% imgproc vmstorage Fit "1000x500" %}}
虚拟机挂载的云盘信息列表
{{% /imgproc %}}

{{% imgproc vmnic Fit "1000x500" %}}
虚拟机挂载的弹性网卡信息列表
{{% /imgproc %}}

{{% imgproc vmsysperf Fit "1000x500" %}}
虚拟机整体的CPU、内存使用率
{{% /imgproc %}}

{{% imgproc vmioperf Fit "1000x500" %}}
虚拟机整体的磁盘I/O、网络I/O情况
{{% /imgproc %}}

## 虚拟机管理

### 新建虚拟机
* 在"基础"页，输入或选择:
  * 输入虚拟机的名称,允许(2～64)个字符
  * (可选)描述
  * 选择虚拟机的规格
  * 选择根云盘规格
  * 输入根云盘大小, GiB为最小单位
  * (可选)选择一个启动镜像（可以从镜像源、镜像格式和操作系统类型中过滤选择），如果不选择一个镜像给启动盘，则需要在"添加虚拟设备"页中设置启动光盘，否则为无操作系统启动。
  * 选择一个网络
  * 选择一个子网 

{{% imgproc newvmgeneral Fit "1000x1500" %}}
{{% /imgproc %}}

* 在"登录"页输入:
  * (可选) ssh root用户的初始密码，**注意,如果客户端操作系统没有安装cloud-init，该设置将不会生效**。
  * (可选) vnc 控制台的登录密码
{{% imgproc newvmlogin Fit "1000x600" %}}
{{% /imgproc %}}

* 在"添加虚拟设备"页输入或选择:
  * CDRom设备，如果选择"从CDRom"启动，则该CDRom作为引导盘启动
  * 可以添加最多32块数据云盘
  * 可以添加最多8个网卡
{{% imgproc newvmdevices Fit "1000x1500" %}}
{{% /imgproc %}}

### 更新虚拟机信息

{{% imgproc vmupdate Fit "800x600" %}}
{{% /imgproc %}}

### 虚拟机生命周期管理

* **启动**: 对于处于"停止"或者"启动失败"状态下的虚拟机，在虚拟机列表"操作"列点击"启动"开始异步的启动任务, 页面会自动刷新并更新任务状态。
* **停止**: 对于处于"运行中"或者"停止失败"状态下的虚拟机，在虚拟机列表"操作"列点击"停止"开始异步的停止任务, 页面会自动刷新并更新任务状态。
* **删除**: 对于处于"停止"状态的虚拟机，在虚拟机列表"操作"列点击"删除"开始异步的删除任务, 页面会自动刷新并更新任务状态。
{{% alert title="警告" color="warning" %}}
删除虚拟机后虚拟机不能再恢复，虚拟机关联的资源也会被释放
{{% /alert %}}

### 批量操作

* **批量启动**: 可以选择多个"停止"状态的虚拟机一起启动，页面会自动刷新并更新任务的状态。
* **批量停止**: 可以选择多个"运行中"状态的虚拟机一起停止，页面会自动刷新并更新任务的状态。
* **批量删除**: 可以选择多个"停止"状态的虚拟机一起删除，页面会自动刷新并更新任务的状态。

## 关联设备的管理

### 挂载、卸载数据云盘
* 在虚拟机详情页，"云盘"列表页中选择要卸载的云盘，点击"操作"菜单的"卸载"，启动卸载任务。**注意，根云盘不能卸载**
* 在虚拟机详情页，点击"挂载云盘", 弹出窗口中选择要挂载的云盘完成挂载，对于Ceph云盘，可选择该用户下所有可用(未挂载)的Ceph Image，对于本地存储，只能选择当前节点上的云盘。
{{% imgproc attach_volume Fit "800x400" %}}
{{% /imgproc %}}

### 挂载、卸载弹性网卡
* 在虚拟机详情页，"网卡"列表页中选择要卸载的网卡，点击"操作"菜单的"卸载"，启动卸载任务。**注意，主网卡不能卸载**
* 在虚拟机详情页，点击"挂载网卡", 弹出窗口中选择要挂载的可用网卡进行挂载。
{{% imgproc attach_nic Fit "800x400" %}}
{{% /imgproc %}}